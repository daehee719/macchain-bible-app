import { jsx as _jsx, jsxs as _jsxs, Fragment as _Fragment } from "react/jsx-runtime";
import Button from '../components/ui/Button';
import { StatsCard } from '../components/ui/StatsCard';
import { PageHeader } from '../components/ui/PageHeader';
import { useState, useEffect } from 'react';
import { Link } from 'react-router-dom';
import { useAuth } from '../contexts/AuthContext';
import { BookOpen, Brain, Users, BarChart3, Calendar, TrendingUp, ArrowRight, Flame } from 'lucide-react';
import { apiService } from '../services/api';
const Dashboard = () => {
    const { isLoggedIn } = useAuth();
    const [todayReading, setTodayReading] = useState(null);
    const [loading, setLoading] = useState(true);
    const [error, setError] = useState(null);
    useEffect(() => {
        const fetchTodayPlan = async () => {
            try {
                setLoading(true);
                const plan = await apiService.getTodayPlan();
                setTodayReading(plan);
            }
            catch (err) {
                setError('오늘의 읽기 계획을 불러오는데 실패했습니다.');
                console.error('Error fetching today plan:', err);
            }
            finally {
                setLoading(false);
            }
        };
        fetchTodayPlan();
    }, []);
    const stats = {
        totalDays: 45,
        streak: 12,
        completionRate: 78
    };
    return (_jsx("div", { className: "min-h-screen bg-gray-50 dark:bg-gray-900 py-8", children: _jsxs("div", { className: "max-w-7xl mx-auto px-4 sm:px-6 lg:px-8", children: [_jsx(PageHeader, { title: "\uC131\uACBD \uC77D\uAE30 \uB300\uC2DC\uBCF4\uB4DC", description: "\uB9E4\uC77C \uD568\uAED8\uD558\uB294 \uC131\uACBD \uC77D\uAE30 \uC5EC\uD589", icon: _jsx(BookOpen, { size: 32 }) }), _jsxs("div", { className: "grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-6 mb-8", children: [_jsx(StatsCard, { title: "\uCD1D \uC77D\uC740 \uB0A0", value: stats.totalDays, icon: _jsx(Calendar, { size: 24, className: "text-blue-500" }), description: "\uB204\uC801 \uC77D\uAE30 \uC77C\uC218", trend: { direction: 'up', percent: 12 } }), _jsx(StatsCard, { title: "\uC5F0\uC18D \uC77D\uAE30", value: stats.streak, icon: _jsx(Flame, { size: 24, className: "text-orange-500" }), description: "\uD604\uC7AC \uC2A4\uD2B8\uB9AD", trend: { direction: 'up', percent: 5 } }), _jsx(StatsCard, { title: "\uC644\uC8FC\uC728", value: `${stats.completionRate}%`, icon: _jsx(TrendingUp, { size: 24, className: "text-green-500" }), description: "\uACC4\uD68D \uC644\uC131\uB3C4" }), _jsx(StatsCard, { title: "\uB2E4\uC74C \uC77D\uAE30", value: todayReading ? `${todayReading.readings.length}개` : '---', icon: _jsx(BookOpen, { size: 24, className: "text-purple-500" }), description: "\uC624\uB298\uC758 \uAD6C\uC808" })] }), _jsxs("div", { className: "grid grid-cols-1 lg:grid-cols-3 gap-6 mb-8", children: [_jsx("div", { className: "lg:col-span-2", children: _jsxs("div", { className: "bg-white dark:bg-gray-800 rounded-lg shadow-md overflow-hidden", children: [_jsxs("div", { className: "px-6 py-4 border-b border-gray-200 dark:border-gray-700 flex items-center justify-between", children: [_jsxs("div", { className: "flex items-center", children: [_jsx(Calendar, { size: 20, className: "text-blue-500 mr-3" }), _jsxs("div", { children: [_jsx("h2", { className: "text-lg font-semibold text-gray-900 dark:text-white", children: "\uC624\uB298\uC758 \uC77D\uAE30 \uACC4\uD68D" }), _jsx("p", { className: "text-sm text-gray-500 dark:text-gray-400", children: loading ? "로딩 중..." : error ? "오류 발생" : `${todayReading?.date}` })] })] }), _jsx(Link, { to: "/reading-plan", className: "text-blue-600 dark:text-blue-400 hover:text-blue-700 dark:hover:text-blue-300 transition-colors", children: _jsx(ArrowRight, { size: 20 }) })] }), _jsx("div", { className: "p-6", children: loading ? (_jsxs("div", { className: "text-center py-8", children: [_jsx("div", { className: "inline-block animate-spin rounded-full h-8 w-8 border-b-2 border-blue-500" }), _jsx("p", { className: "text-gray-600 dark:text-gray-400 mt-4", children: "\uC77D\uAE30 \uACC4\uD68D\uC744 \uBD88\uB7EC\uC624\uB294 \uC911..." })] })) : error ? (_jsx("div", { className: "bg-red-50 dark:bg-red-900/20 border border-red-200 dark:border-red-700 rounded-lg p-4 text-red-700 dark:text-red-200", children: error })) : todayReading ? (_jsxs(_Fragment, { children: [_jsx("div", { className: "space-y-4", children: todayReading.readings.map((reading, index) => (_jsxs("div", { className: "flex items-center justify-between p-3 bg-gray-50 dark:bg-gray-700 rounded-lg hover:bg-gray-100 dark:hover:bg-gray-600 transition-colors", children: [_jsx("div", { className: "flex-1", children: _jsxs("div", { className: "flex items-center", children: [_jsx("span", { className: "inline-flex items-center justify-center w-6 h-6 bg-blue-500 text-white rounded-full text-xs font-bold mr-3", children: index + 1 }), _jsxs("span", { className: "font-medium text-gray-900 dark:text-white", children: [reading.book, " ", reading.chapter, ":", reading.verseStart, "-", reading.verseEnd] })] }) }), _jsx("input", { type: "checkbox", className: "w-5 h-5 rounded cursor-pointer text-green-500 focus:ring-2 focus:ring-green-500", "aria-label": `${reading.book} 읽음 표시` })] }, reading.id))) }), _jsx(Link, { to: "/reading-plan", className: "mt-6 block text-center", children: _jsx(Button, { variant: "primary", className: "w-full", children: "\uC804\uCCB4 \uACC4\uD68D \uBCF4\uAE30" }) })] })) : (_jsx("div", { className: "text-center py-8 text-gray-500 dark:text-gray-400", children: "\uC77D\uAE30 \uACC4\uD68D\uC744 \uCC3E\uC744 \uC218 \uC5C6\uC2B5\uB2C8\uB2E4." })) })] }) }), _jsxs("div", { className: "space-y-6", children: [_jsxs("div", { className: "bg-gradient-to-br from-blue-500 to-blue-600 dark:from-blue-600 dark:to-blue-700 rounded-lg shadow-md p-6 text-white overflow-hidden relative", children: [_jsx("div", { className: "absolute top-0 right-0 -mr-8 -mt-8 w-32 h-32 bg-white/10 rounded-full" }), _jsxs("div", { className: "relative", children: [_jsxs("div", { className: "flex items-center mb-3", children: [_jsx(Brain, { size: 28, className: "mr-3" }), _jsx("h3", { className: "text-lg font-semibold", children: "AI \uBD84\uC11D" })] }), _jsx("p", { className: "text-blue-100 text-sm mb-4", children: "\uC77D\uC740 \uAD6C\uC808\uC5D0 \uB300\uD574 AI\uC758 \uB3C4\uC6C0\uC744 \uBC1B\uC544 \uB354 \uAE4A\uC774 \uC774\uD574\uD574\uBCF4\uC138\uC694." }), isLoggedIn ? (_jsx(Link, { to: "/ai-analysis", children: _jsx(Button, { variant: "primary", className: "w-full bg-white text-blue-600 hover:bg-blue-50", children: "\uBD84\uC11D \uC2DC\uC791" }) })) : (_jsx(Link, { to: "/login", children: _jsx(Button, { variant: "primary", className: "w-full bg-white text-blue-600 hover:bg-blue-50", children: "\uB85C\uADF8\uC778" }) }))] })] }), _jsxs("div", { className: "bg-gradient-to-br from-purple-500 to-purple-600 dark:from-purple-600 dark:to-purple-700 rounded-lg shadow-md p-6 text-white overflow-hidden relative", children: [_jsx("div", { className: "absolute top-0 right-0 -mr-8 -mt-8 w-32 h-32 bg-white/10 rounded-full" }), _jsxs("div", { className: "relative", children: [_jsxs("div", { className: "flex items-center mb-3", children: [_jsx(Users, { size: 28, className: "mr-3" }), _jsx("h3", { className: "text-lg font-semibold", children: "\uCEE4\uBBA4\uB2C8\uD2F0" })] }), _jsx("p", { className: "text-purple-100 text-sm mb-4", children: "\uB2E4\uB978 \uC131\uB3C4\uB4E4\uACFC \uC18C\uD1B5\uD558\uBA70 \uC131\uC7A5\uD558\uC138\uC694." }), isLoggedIn ? (_jsx(Link, { to: "/community", children: _jsx(Button, { variant: "primary", className: "w-full bg-white text-purple-600 hover:bg-purple-50", children: "\uCC38\uC5EC\uD558\uAE30" }) })) : (_jsx(Link, { to: "/login", children: _jsx(Button, { variant: "primary", className: "w-full bg-white text-purple-600 hover:bg-purple-50", children: "\uB85C\uADF8\uC778" }) }))] })] }), _jsxs("div", { className: "bg-gradient-to-br from-green-500 to-green-600 dark:from-green-600 dark:to-green-700 rounded-lg shadow-md p-6 text-white overflow-hidden relative", children: [_jsx("div", { className: "absolute top-0 right-0 -mr-8 -mt-8 w-32 h-32 bg-white/10 rounded-full" }), _jsxs("div", { className: "relative", children: [_jsxs("div", { className: "flex items-center mb-3", children: [_jsx(BarChart3, { size: 28, className: "mr-3" }), _jsx("h3", { className: "text-lg font-semibold", children: "\uC0C1\uC138 \uD1B5\uACC4" })] }), _jsx("p", { className: "text-green-100 text-sm mb-4", children: "\uC790\uC138\uD55C \uC77D\uAE30 \uD1B5\uACC4\uB97C \uD655\uC778\uD558\uC138\uC694." }), isLoggedIn ? (_jsx(Link, { to: "/statistics", children: _jsx(Button, { variant: "primary", className: "w-full bg-white text-green-600 hover:bg-green-50", children: "\uBCF4\uAE30" }) })) : (_jsx(Link, { to: "/login", children: _jsx(Button, { variant: "primary", className: "w-full bg-white text-green-600 hover:bg-green-50", children: "\uB85C\uADF8\uC778" }) }))] })] })] })] }), !isLoggedIn && (_jsxs("div", { className: "bg-blue-50 dark:bg-blue-900/20 border border-blue-200 dark:border-blue-700 rounded-lg p-6 text-center", children: [_jsx("h3", { className: "text-lg font-semibold text-gray-900 dark:text-white mb-2", children: "\uB354 \uB9CE\uC740 \uAE30\uB2A5\uC744 \uC0AC\uC6A9\uD558\uB824\uBA74 \uB85C\uADF8\uC778\uD558\uC138\uC694" }), _jsx("p", { className: "text-gray-600 dark:text-gray-400 mb-4", children: "AI \uBD84\uC11D, \uCEE4\uBBA4\uB2C8\uD2F0, \uC0C1\uC138 \uD1B5\uACC4 \uB4F1\uC758 \uAE30\uB2A5\uC744 \uC774\uC6A9\uD560 \uC218 \uC788\uC2B5\uB2C8\uB2E4." }), _jsx(Link, { to: "/login", children: _jsx(Button, { variant: "primary", children: "\uB85C\uADF8\uC778\uD558\uAE30" }) })] }))] }) }));
};
export default Dashboard;
